{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.UintBigintType = exports.UintNumberType = exports.uintBigintByteLens = exports.uintNumberByteLens = void 0;\nconst persistent_merkle_tree_1 = require(\"@chainsafe/persistent-merkle-tree\");\nconst named_1 = require(\"../util/named\");\nconst basic_1 = require(\"./basic\");\n/* eslint-disable @typescript-eslint/member-ordering */\nconst MAX_SAFE_INTEGER_BN = BigInt(Number.MAX_SAFE_INTEGER);\nconst BIGINT_2_POW_64 = BigInt(2) ** BigInt(64);\nconst BIGINT_2_POW_128 = BigInt(2) ** BigInt(128);\nconst BIGINT_2_POW_192 = BigInt(2) ** BigInt(192);\n// const BIGINT_64_MAX = BigInt(\"0xffffffffffffffff\");\nconst NUMBER_2_POW_32 = 2 ** 32;\nconst NUMBER_32_MAX = 0xffffffff;\nexports.uintNumberByteLens = [1, 2, 4, 8];\nexports.uintBigintByteLens = [1, 2, 4, 8, 16, 32];\n/**\n * Uint: N-bit unsigned integer (where N in [8, 16, 32, 64, 128, 256])\n * - Notation: uintN\n *\n * UintNumber is represented as the Javascript primitive value 'Number'.\n *\n * The Number type is a double-precision 64-bit binary format IEEE 754 value (numbers between -(2^53 − 1) and\n * 2^53 − 1). It also has the symbolic value: +Infinity.\n *\n * As of 2021 performance of 'Number' is extremely faster than 'BigInt'. Some values are spec'ed as Uint64 but\n * practically they will never exceed 53 bits, such as any unit time or simple counters. This type is an optimization\n * for these cases, as UintNumber64 can represent any value between 0 and 2^53−1 as well as the max value 2^64-1.\n */\nclass UintNumberType extends basic_1.BasicType {\n  constructor(byteLength, opts) {\n    super();\n    this.byteLength = byteLength;\n    if (byteLength > 8) {\n      throw Error(\"UintNumber byteLength limit is 8\");\n    }\n    if (Math.log2(byteLength) % 1 !== 0) {\n      throw Error(\"byteLength must be a power of 2\");\n    }\n    this.typeName = opts?.typeName ?? `uint${byteLength * 8}`;\n    if (opts?.clipInfinity) this.typeName += \"Inf\";\n    if (opts?.setBitwiseOR) this.typeName += \"OR\";\n    this.itemsPerChunk = 32 / this.byteLength;\n    this.fixedSize = byteLength;\n    this.minSize = byteLength;\n    this.maxSize = byteLength;\n    this.maxDecimalStr = (BigInt(2) ** BigInt(this.byteLength * 8) - BigInt(1)).toString(10);\n    this.clipInfinity = opts?.clipInfinity === true;\n    this.setBitwiseOR = opts?.setBitwiseOR === true;\n  }\n  static named(byteLength, opts) {\n    return new (named_1.namedClass(UintNumberType, opts.typeName))(byteLength, opts);\n  }\n  defaultValue() {\n    return 0;\n  }\n  // Serialization + deserialization\n  value_serializeToBytes({\n    dataView\n  }, offset, value) {\n    switch (this.byteLength) {\n      case 1:\n        dataView.setInt8(offset, value);\n        break;\n      case 2:\n        dataView.setUint16(offset, value, true);\n        break;\n      case 4:\n        dataView.setUint32(offset, value, true);\n        break;\n      case 8:\n        if (value === Infinity) {\n          // TODO: Benchmark if it's faster to set BIGINT_64_MAX once\n          dataView.setUint32(offset, 0xffffffff);\n          dataView.setUint32(offset + 4, 0xffffffff);\n        } else {\n          dataView.setUint32(offset, value & 0xffffffff, true);\n          dataView.setUint32(offset + 4, value / NUMBER_2_POW_32 & 0xffffffff, true);\n        }\n        break;\n    }\n    return offset + this.byteLength;\n  }\n  value_deserializeFromBytes({\n    dataView\n  }, start, end) {\n    this.assertValidSize(end - start);\n    switch (this.byteLength) {\n      case 1:\n        return dataView.getUint8(start);\n      case 2:\n        return dataView.getUint16(start, true);\n      case 4:\n        return dataView.getUint32(start, true);\n      case 8:\n        {\n          const a = dataView.getUint32(start, true);\n          const b = dataView.getUint32(start + 4, true);\n          if (b === NUMBER_32_MAX && a === NUMBER_32_MAX && this.clipInfinity) {\n            return Infinity;\n          } else {\n            return b * NUMBER_2_POW_32 + a;\n          }\n        }\n    }\n  }\n  tree_serializeToBytes(output, offset, node) {\n    const value = node.getUint(this.byteLength, 0, this.clipInfinity);\n    this.value_serializeToBytes(output, offset, value);\n    return offset + this.byteLength;\n  }\n  tree_deserializeFromBytes(data, start, end) {\n    this.assertValidSize(end - start);\n    const value = this.value_deserializeFromBytes(data, start, end);\n    const node = persistent_merkle_tree_1.LeafNode.fromZero();\n    node.setUint(this.byteLength, 0, value, this.clipInfinity);\n    return node;\n  }\n  // Fast Tree access\n  tree_getFromNode(leafNode) {\n    return leafNode.getUint(this.byteLength, 0, this.clipInfinity);\n  }\n  tree_setToNode(leafNode, value) {\n    this.tree_setToPackedNode(leafNode, 0, value);\n  }\n  tree_getFromPackedNode(leafNode, index) {\n    const offsetBytes = this.byteLength * (index % this.itemsPerChunk);\n    return leafNode.getUint(this.byteLength, offsetBytes, this.clipInfinity);\n  }\n  tree_setToPackedNode(leafNode, index, value) {\n    const offsetBytes = this.byteLength * (index % this.itemsPerChunk);\n    // TODO: Benchmark the cost of this if, and consider using a different class\n    if (this.setBitwiseOR) {\n      leafNode.bitwiseOrUint(this.byteLength, offsetBytes, value);\n    } else {\n      leafNode.setUint(this.byteLength, offsetBytes, value, this.clipInfinity);\n    }\n  }\n  // JSON\n  fromJson(json) {\n    if (typeof json === \"number\") {\n      return json;\n    } else if (typeof json === \"string\") {\n      if (this.clipInfinity && json === this.maxDecimalStr) {\n        // Allow to handle max possible number\n        return Infinity;\n      } else {\n        const num = parseInt(json, 10);\n        if (isNaN(num)) {\n          throw Error(\"JSON invalid number isNaN\");\n        } else if (num > Number.MAX_SAFE_INTEGER) {\n          // Throw to prevent decimal precision errors downstream\n          throw Error(\"JSON invalid number > MAX_SAFE_INTEGER\");\n        } else {\n          return num;\n        }\n      }\n    } else if (typeof json === \"bigint\") {\n      if (json > MAX_SAFE_INTEGER_BN) {\n        // Throw to prevent decimal precision errors downstream\n        throw Error(\"JSON invalid number > MAX_SAFE_INTEGER_BN\");\n      } else {\n        return Number(json);\n      }\n    } else {\n      throw Error(`JSON invalid type ${typeof json} expected number`);\n    }\n  }\n  toJson(value) {\n    if (value === Infinity) {\n      return this.maxDecimalStr;\n    } else {\n      return value.toString(10);\n    }\n  }\n}\nexports.UintNumberType = UintNumberType;\n/**\n * Uint: N-bit unsigned integer (where N in [8, 16, 32, 64, 128, 256])\n * - Notation: uintN\n *\n * UintBigint is represented as the Javascript primitive value 'BigInt'.\n *\n * The BigInt type is a numeric primitive in JavaScript that can represent integers with arbitrary precision.\n * With BigInts, you can safely store and operate on large integers even beyond the safe integer limit for Numbers.\n *\n * As of 2021 performance of 'Number' is extremely faster than 'BigInt'. For Uint values under 53 bits use UintNumber.\n * For other values that may exceed 53 bits, use UintBigint.\n */\nclass UintBigintType extends basic_1.BasicType {\n  constructor(byteLength, opts) {\n    super();\n    this.byteLength = byteLength;\n    if (byteLength > 32) {\n      throw Error(\"UintBigint byteLength limit is 32\");\n    }\n    if (Math.log2(byteLength) % 1 !== 0) {\n      throw Error(\"byteLength must be a power of 2\");\n    }\n    this.typeName = opts?.typeName ?? `uintBigint${byteLength * 8}`;\n    this.byteLength = byteLength;\n    this.itemsPerChunk = 32 / this.byteLength;\n    this.fixedSize = byteLength;\n    this.minSize = byteLength;\n    this.maxSize = byteLength;\n  }\n  static named(byteLength, opts) {\n    return new (named_1.namedClass(UintBigintType, opts.typeName))(byteLength, opts);\n  }\n  defaultValue() {\n    return BigInt(0);\n  }\n  // Serialization + deserialization\n  value_serializeToBytes({\n    dataView\n  }, offset, value) {\n    switch (this.byteLength) {\n      case 1:\n        dataView.setInt8(offset, Number(value));\n        break;\n      case 2:\n        dataView.setUint16(offset, Number(value), true);\n        break;\n      case 4:\n        dataView.setUint32(offset, Number(value), true);\n        break;\n      case 8:\n        dataView.setBigUint64(offset, value, true);\n        break;\n      default:\n        {\n          for (let i = 0; i < this.byteLength; i += 8) {\n            if (i > 0) value = value / BIGINT_2_POW_64;\n            const lo = BigInt.asUintN(64, value);\n            dataView.setBigUint64(offset + i, lo, true);\n          }\n        }\n    }\n    return offset + this.byteLength;\n  }\n  value_deserializeFromBytes({\n    dataView\n  }, start, end) {\n    const size = end - start;\n    if (size !== this.byteLength) {\n      throw Error(`Invalid size ${size} expected ${this.byteLength}`);\n    }\n    // Note: pre-assigning the right function at the constructor to avoid this switch is not faster\n    switch (this.byteLength) {\n      case 1:\n        return BigInt(dataView.getUint8(start));\n      case 2:\n        return BigInt(dataView.getUint16(start, true));\n      case 4:\n        return BigInt(dataView.getUint32(start, true));\n      case 8:\n        return dataView.getBigUint64(start, true);\n      case 16:\n        {\n          const a = dataView.getBigUint64(start, true);\n          const b = dataView.getBigUint64(start + 8, true);\n          return b * BIGINT_2_POW_64 + a;\n        }\n      case 32:\n        {\n          const a = dataView.getBigUint64(start, true);\n          const b = dataView.getBigUint64(start + 8, true);\n          const c = dataView.getBigUint64(start + 16, true);\n          const d = dataView.getBigUint64(start + 24, true);\n          return d * BIGINT_2_POW_192 + c * BIGINT_2_POW_128 + b * BIGINT_2_POW_64 + a;\n        }\n    }\n  }\n  tree_serializeToBytes(output, offset, node) {\n    const value = node.getUintBigint(this.byteLength, 0);\n    this.value_serializeToBytes(output, offset, value);\n    return offset + this.byteLength;\n  }\n  tree_deserializeFromBytes(data, start, end) {\n    const size = end - start;\n    if (size !== this.byteLength) {\n      throw Error(`Invalid size ${size} expected ${this.byteLength}`);\n    }\n    const value = this.value_deserializeFromBytes(data, start, end);\n    const node = persistent_merkle_tree_1.LeafNode.fromZero();\n    node.setUintBigint(this.byteLength, 0, value);\n    return node;\n  }\n  // Fast Tree access\n  tree_getFromNode(leafNode) {\n    return leafNode.getUintBigint(this.byteLength, 0);\n  }\n  /** Mutates node to set value */\n  tree_setToNode(leafNode, value) {\n    this.tree_setToPackedNode(leafNode, 0, value);\n  }\n  /** EXAMPLE of `tree_getFromNode` */\n  tree_getFromPackedNode(leafNode, index) {\n    const offsetBytes = this.byteLength * (index % this.itemsPerChunk);\n    return leafNode.getUintBigint(this.byteLength, offsetBytes);\n  }\n  /** Mutates node to set value */\n  tree_setToPackedNode(leafNode, index, value) {\n    const offsetBytes = this.byteLength * (index % this.itemsPerChunk);\n    // TODO: Not-optimized, copy pasted from UintNumberType\n    leafNode.setUintBigint(this.byteLength, offsetBytes, value);\n  }\n  // JSON\n  fromJson(json) {\n    if (typeof json === \"bigint\") {\n      return json;\n    } else if (typeof json === \"string\" || typeof json === \"number\") {\n      return BigInt(json);\n    } else {\n      throw Error(`JSON invalid type ${typeof json} expected bigint`);\n    }\n  }\n  toJson(value) {\n    return value.toString(10);\n  }\n}\nexports.UintBigintType = UintBigintType;","map":{"version":3,"names":["persistent_merkle_tree_1","require","named_1","basic_1","MAX_SAFE_INTEGER_BN","BigInt","Number","MAX_SAFE_INTEGER","BIGINT_2_POW_64","BIGINT_2_POW_128","BIGINT_2_POW_192","NUMBER_2_POW_32","NUMBER_32_MAX","exports","uintNumberByteLens","uintBigintByteLens","UintNumberType","BasicType","constructor","byteLength","opts","Error","Math","log2","typeName","clipInfinity","setBitwiseOR","itemsPerChunk","fixedSize","minSize","maxSize","maxDecimalStr","toString","named","namedClass","defaultValue","value_serializeToBytes","dataView","offset","value","setInt8","setUint16","setUint32","Infinity","value_deserializeFromBytes","start","end","assertValidSize","getUint8","getUint16","getUint32","a","b","tree_serializeToBytes","output","node","getUint","tree_deserializeFromBytes","data","LeafNode","fromZero","setUint","tree_getFromNode","leafNode","tree_setToNode","tree_setToPackedNode","tree_getFromPackedNode","index","offsetBytes","bitwiseOrUint","fromJson","json","num","parseInt","isNaN","toJson","UintBigintType","setBigUint64","i","lo","asUintN","size","getBigUint64","c","d","getUintBigint","setUintBigint"],"sources":["../../src/type/uint.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}